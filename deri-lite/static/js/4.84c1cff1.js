(this["webpackJsonp_deri-lite"]=this["webpackJsonp_deri-lite"]||[]).push([[4],{1130:function(e,t){function c(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}c.keys=function(){return[]},c.resolve=c,e.exports=c,c.id=1130},1131:function(e,t){},1132:function(e,t,c){"use strict";var n=c(13),i=c(3),a=(c(1487),c(859)),s=c.n(a),l=c(115),r=c(51),o=(c(1133),c(23));t.a=Object(r.b)("version","wallet","type","trading","loading")(Object(r.c)((function(e){var t=e.wallet,c=e.type,a=Object(i.useState)("Futures"),r=Object(n.a)(a,2),d=r[0],j=r[1],b=s()("area-picker-wrapper",d),u=Object(i.useState)({}),A=Object(n.a)(u,2),m=A[0],O=A[1],x=function(e){j(e),"Futures"===e?(c.setCurrent("future"),l.a.setCurrent("futures")):"Options"===e?(c.setCurrent("option"),l.a.setCurrent("option")):"Powers"===e&&(c.setCurrent("power"),l.a.setCurrent("power"))};return Object(i.useEffect)((function(){return O({width:"".concat(100/3,"%")}),function(){}}),[t.detailt]),Object(o.jsx)("div",{className:"area-picker",children:Object(o.jsxs)("div",{className:b,children:[Object(o.jsx)("span",{className:"left",style:m,onClick:function(){return x("Futures")},children:"Futures"}),Object(o.jsx)("span",{className:"middle",style:m,onClick:function(){return x("Options")},children:"Options"}),Object(o.jsx)("span",{className:"right",style:m,onClick:function(){return x("Powers")},children:" Powers"})]})})})))},1133:function(e,t,c){"use strict";t.a=c.p+"static/media/left-menu.bacadc6c.svg"},1218:function(e,t,c){"use strict";var n=c(13),i=c(3),a=c(0),s=c.n(a),l=c(27),r=c(1),o=c(7),d=c(859),j=c.n(d),b=c(203),u=c(12),A=c(201),m=c(929),O=c(51),x=c(23);var p=Object(O.b)("wallet","trading")(Object(O.c)((function(e){var t=Object(i.useState)(Object(x.jsx)("span",{className:"loading-line"})),c=Object(n.a)(t,2),a=c[0],s=c[1],r=function(){var t=e.allowZero;return"object"!==Object(l.a)(e.value)&&void 0!==e.value&&""!==e.value&&"NaN"!==e.value||0===(isNaN(e.value)&&Math.abs(e.value))&&!0===t};return Object(i.useEffect)((function(){e.allowZero;var t=e.wallet,c=e.defaultValue,n=void 0===c?"--":c,i=Object(A.a)(e,["allowZero","wallet","defaultValue"]);r()?s(Object(x.jsx)(m.a,Object(u.a)(Object(u.a)({},i),{},{displayType:"text",fixedDecimalScale:!0}))):s(Object(x.jsx)("span",{className:"loading-line"}));var a=window.setTimeout((function(){r()||!t||t.isConnected()||s(n)}),3e4);return function(){clearTimeout(a)}}),[e.value]),a}))),f=c(26);function g(e){var t=e.btnText,c=e.className,a=e.disabled,l=e.click,o=e.afterClick,d=e.checkApprove,j=e.wallet,b=e.spec,u=e.lang,A=Object(i.useState)(a?"disabled":"enabled"),m=Object(n.a)(A,2),O=m[0],p=m[1],f=Object(i.useState)(!0),g=Object(n.a)(f,2),h=g[0],v=g[1],N=Object(i.useState)(!1),w=Object(n.a)(N,2),y=w[0],k=w[1],S=Object(i.useState)(t),C=Object(n.a)(S,2),D=C[0],I=C[1],B=Object(i.useRef)(null),M=function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"===O){e.next=2;break}return e.abrupt("return");case 2:return Q(),e.next=5,l();case 5:e.sent&&o&&o(),E();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){p("disabled"),k(!0),B.current&&(B.current.style.display="inline-block")},E=function(){B.current&&(B.current.style.display="none"),p("enabled"),k(!1)},P=function(){var e=Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d&&j&&j.detail.account)){e.next=5;break}return e.next=3,j.isApproved(b.address,b.bTokenSymbol);case 3:t=e.sent,v(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(),e.next=3,j.approve(b.address,b.bTokenSymbol);case 3:e.sent.success?v(!0):(v(!1),alert(u["approve-failed"])),E();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return P(),function(){}}),[j,b,d]),Object(i.useEffect)((function(){return t&&I(t),function(){}}),[t]),Object(x.jsxs)("button",{className:c,onClick:function(){h?M():T()},children:[Object(x.jsx)("span",{className:"btn-loading-wrap",children:Object(x.jsx)("span",{ref:B,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),y?u.pending:h?D:u.approve]})}function h(e){return Object(i.useEffect)((function(){return document.querySelector("body").style.overflow="hidden",function(){e||(document.querySelector("body").style.overflow="auto")}}),[]),null}var v=c(32);function N(e){var t=e.wallet,c=e.spec,a=void 0===c?{}:c,l=e.onClose,d=e.balance,j=e.afterDeposit,b=e.nested,u=e.lang,A=Object(i.useState)(""),O=Object(n.a)(A,2),p=O[0],f=O[1],N=Object(i.useState)(""),w=Object(n.a)(N,2),y=w[0],k=w[1],S=Object(i.useState)(""),C=Object(n.a)(S,2),D=C[0],I=C[1],B=Object(i.useState)(!1),M=Object(n.a)(B,2),Q=M[0],E=M[1];h(b);var P=function(){var e=Object(r.a)(s.a.mark((function e(c){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(o.bg)(d),!Object(o.bg)(c).gt(n)){e.next=5;break}return alert(u["insufficient-balance-in-wallet"]),e.abrupt("return");case 5:if(!(+c<=0||isNaN(c))){e.next=8;break}return alert(u["it-has-to-be-greater-than-zero-tip"]),e.abrupt("return");case 8:return E(!0),e.next=11,v.a.request("depositMargin",[t.detail.chainId,a.address,t.detail.account,c,a.bTokenSymbol],{includeResponse:!0});case 11:e.sent.success?(j(),l()):alert(u["deposit-failed"]),E(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){if(d){var e=(+d).toFixed(2),t=e.indexOf(".")>0?e.substring(e.indexOf(".")+1,e.length):"0";f(d),k(t)}}(),function(){}}),[d]),Object(x.jsx)("div",{className:"modal fade",children:Object(x.jsx)("div",{className:"modal-dialog",children:Object(x.jsxs)("div",{className:"modal-content",children:[Object(x.jsxs)("div",{className:"modal-header",children:[Object(x.jsx)("div",{className:"title",children:u["deposit-margin"]}),Object(x.jsx)("div",{className:"close","data-dismiss":"modal",onClick:function(){Q||l()},children:Object(x.jsx)("span",{children:"\xd7"})})]}),Object(x.jsx)("div",{className:"modal-body",children:Object(x.jsxs)("div",{className:"margin-box-info",children:[Object(x.jsx)("div",{children:u["wallet-balance"]}),Object(x.jsxs)("div",{className:"money",children:[Object(x.jsxs)("span",{children:[Object(x.jsxs)("span",{className:"bt-balance",children:[Object(x.jsx)(m.a,{value:p,displayType:"text",decimalScale:0}),".",Object(x.jsx)("span",{style:{fontSize:"12px"},children:y})]}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{style:{fontSize:"14px",marginLeft:"10px",marginTop:"10px"},children:a.bTokenSymbol})]}),Object(x.jsx)("span",{className:"add"})]}),Object(x.jsxs)("div",{className:"enter-margin",children:[Object(x.jsx)("div",{className:"input-margin",children:Object(x.jsxs)("div",{className:"box",children:[Object(x.jsx)("div",{className:"amount",style:{display:""!==D?"block":"none"},children:u.amount}),Object(x.jsx)("input",{type:"number",className:"margin-value",placeholder:u.amount,value:D,onChange:function(e){var t=e.target.value;I(t)}})]})}),Object(x.jsx)("div",{children:a.bTokenSymbol})]}),Object(x.jsxs)("div",{className:"max",children:[u["max-add"],": ",Object(x.jsx)("span",{className:"max-num",children:d}),Object(x.jsx)("span",{className:"max-btn-left",onClick:function(){I(d)},children:u["add-all"]})]}),Object(x.jsx)("div",{className:"add-margin-btn",children:Object(x.jsx)(g,{className:"margin-btn",btnText:u.deposit,checkApprove:!0,wallet:t,spec:a,lang:u,click:function(){return P(D)}})})]})})]})})})}function w(e){var t=e.wallet,c=e.spec,a=void 0===c?{}:c,l=e.position,o=e.onClose,d=e.afterWithdraw,j=e.availableBalance,b=e.nested,u=e.lang,A=Object(i.useState)(""),m=Object(n.a)(A,2),O=m[0],N=m[1],w=Object(i.useState)(""),y=Object(n.a)(w,2),k=y[0],S=y[1],C=Object(i.useState)(""),D=Object(n.a)(C,2),I=D[0],B=D[1],M=Object(i.useState)(!1),Q=Object(n.a)(M,2),E=Q[0],P=Q[1];h(b);var T=function(){var e=Object(r.a)(s.a.mark((function e(){var c,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isConnected()&&j&&(N(c=j),n=c.indexOf("."),S(n>0?c.substring(n+1,n+3):"00"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(r.a)(s.a.mark((function e(){var c,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(f.a)(O),!Object(f.a)(I).gt(c)){e.next=5;break}return alert(u["under-margin"]),e.abrupt("return");case 5:if(!(+I<=0||isNaN(I))){e.next=8;break}return alert(u["it-has-to-be-greater-than-zero-tip"]),e.abrupt("return");case 8:return P(!0),n=c.eq(I),e.next=12,v.a.request("withdrawMargin",[t.detail.chainId,a.address,t.detail.account,I,a.bTokenSymbol,n],{includeResponse:!0});case 12:e.sent.success?(d(),o()):alert("Withdraw Failed"),P(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return T(),function(){}}),[t.detail.account,l.margin,l.unrealizedPnl]),Object(x.jsx)("div",{className:"modal fade",id:"removeMargin",children:Object(x.jsx)("div",{className:"modal-dialog",children:Object(x.jsxs)("div",{className:"modal-content",children:[Object(x.jsxs)("div",{className:"modal-header",children:[Object(x.jsx)("div",{className:"title",children:u["withdraw-margin"]}),Object(x.jsx)("div",{className:"close",onClick:function(){E||o()},children:Object(x.jsx)("span",{children:"\xd7"})})]}),Object(x.jsx)("div",{className:"modal-body",children:Object(x.jsxs)("div",{className:"margin-box-info",children:[Object(x.jsx)("div",{children:u["available-balance"]}),Object(x.jsxs)("div",{className:"money",children:[Object(x.jsx)("span",{children:Object(x.jsxs)("span",{className:"bt-balance",children:[Object(x.jsx)(p,{value:O,thousandSeparator:!0,decimalScale:0}),".",Object(x.jsx)("span",{style:{fontSize:"12px"},children:k})]})}),Object(x.jsx)("span",{className:"remove"})]}),Object(x.jsxs)("div",{className:"enter-margin remv",children:[Object(x.jsx)("div",{className:"input-margin",children:Object(x.jsxs)("div",{className:"box",children:[Object(x.jsx)("div",{className:"amount",style:{display:""!==I?"block":"none"},children:u.amount}),Object(x.jsx)("input",{type:"number",className:"margin-value",value:I,onChange:function(e){var t=e.target.value;B(t)},placeholder:u.amount})]})}),Object(x.jsx)("div",{children:a.baseToken})]}),0===+l.marginHeld&&Object(x.jsxs)("div",{className:"max",children:[u.max,": ",Object(x.jsx)("span",{className:"max-num",children:O||l.margin}),Object(x.jsx)("span",{className:"max-btn-left",onClick:function(){B(j)},children:u["remove-all"]})]}),+l.volume>0&&Object(x.jsxs)("div",{className:"max",children:[Object(x.jsx)("span",{className:"max-num"}),Object(x.jsx)("span",{className:"max-btn-left",children:" "})]}),Object(x.jsx)("div",{className:"add-margin-btn",children:Object(x.jsx)(g,{className:"margin-btn",btnText:u.withdraw,lang:u,click:F,checkApprove:!0,wallet:t,spec:a})})]})})]})})})}var y=c.p+"static/media/remove-margin.1ccb58c4.svg",k=c.p+"static/media/add-margin.8b496dd1.svg",S=Object(b.a)(N),C=Object(b.a)(w);function D(e){var t=e.wallet,c=e.spec,a=e.afterDepositAndWithdraw,l=e.position,d=e.onClose,j=e.lang,b=Object(i.useState)([]),A=Object(n.a)(b,2),m=A[0],O=A[1],g=parseInt((document.body.offsetHeight-140)/54),N=Object(i.useState)(Array.from({length:g})),w=Object(n.a)(N,2),D=(w[0],w[1]),I=Object(i.useState)(!1),B=Object(n.a)(I,2),M=B[0],Q=B[1],E=Object(i.useState)(!1),P=Object(n.a)(E,2),T=P[0],F=P[1],R=Object(i.useState)(""),Y=Object(n.a)(R,2),J=Y[0],G=Y[1],H=Object(i.useState)(""),U=Object(n.a)(H,2),q=U[0],Z=U[1],z=Object(i.useState)(""),L=Object(n.a)(z,2),W=L[0],K=L[1],V=Object(i.useState)(""),X=Object(n.a)(V,2),_=X[0],$=X[1];h();var ee=function(){var e=Object(r.a)(s.a.mark((function e(){var n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=7;break}return n=t.isConnected()&&t.supportCurNetwork?[t.detail.chainId,c.address,t.detail.account]:[Object(f.g)(o.DeriEnv.get()).id,c.address,"0x0000000000000000000000000000000000000000"],e.next=4,v.a.request("getUserBTokensInfo",n);case 4:i=e.sent,O(i),i.length<g&&D(Array.from({length:g-i.length}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return ee(),window.scrollTo(0,0),function(){}}),[t.detail.account,c]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"modal fade",children:Object(x.jsx)("div",{className:"modal-dialog",children:Object(x.jsxs)("div",{className:"modal-content",children:[Object(x.jsxs)("div",{className:"modal-header",children:[Object(x.jsx)("div",{className:"title",children:j["balance-in-contract-uppercase"]}),Object(x.jsx)("div",{className:"close","data-dismiss":"modal",onClick:function(){a(),d()},children:Object(x.jsx)("span",{children:"\xd7"})})]}),Object(x.jsx)("div",{className:"modal-body",children:Object(x.jsxs)("div",{className:"balance-list",children:[Object(x.jsxs)("div",{className:"row header",children:[Object(x.jsx)("span",{className:"btoken pc",children:j["base-token"]}),Object(x.jsx)("span",{className:"btoken mobile",children:j["base-token"]}),Object(x.jsx)("span",{className:"w-balance pc",children:j["wallet-balance"]}),Object(x.jsx)("span",{className:"w-balance mobile",children:j["wallet-balance"]}),Object(x.jsx)("span",{className:"avail-balance pc",children:j["available-balance"]}),Object(x.jsx)("span",{className:"avail-balance mobile",children:j["available-balance"]})]}),m.map((function(e,t){return Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("span",{className:"btoken",children:e.bTokenSymbol}),Object(x.jsx)("span",{className:"w-balance",children:Object(x.jsx)(p,{value:e.walletBalance,fixedDecimalScale:!0,decimalScale:2})}),Object(x.jsx)("span",{className:"avail-balance",children:Object(x.jsx)(p,{value:e.availableBalance,fixedDecimalScale:!0,decimalScale:2})}),Object(x.jsxs)("span",{className:"action",children:[Object(x.jsxs)("span",{className:"add-margin",id:"openAddMargin",onClick:function(){return function(e,t,c){G(e),K(t),$(c),Q(!0)}(e.walletBalance,e.bTokenId,e.bTokenSymbol)},children:[Object(x.jsx)("img",{src:y,alt:j["add-margin"]})," ",j.add]}),Object(x.jsxs)("span",{className:"remove-margin",onClick:function(){return function(e,t,c){Z(e),K(t),$(c),F(!0)}(e.availableBalance,e.bTokenId,e.bTokenSymbol)},children:[Object(x.jsx)("img",{src:k,alt:j["remove-margin"]})," ",j.remove]})]})]},t)}))]})})]})})}),Object(x.jsx)(S,{wallet:t,onClose:function(){return Q(!1)},balance:J,spec:Object(u.a)(Object(u.a)({},c),{},{bTokenId:W,bTokenSymbol:_}),position:l,modalIsOpen:M,afterDeposit:function(){Q(!1),ee()},className:"trading-dialog",nested:!0,lang:j}),Object(x.jsx)(C,{wallet:t,onClose:function(){return F(!1)},spec:Object(u.a)(Object(u.a)({},c),{},{bTokenId:W,bTokenSymbol:_}),position:l,modalIsOpen:T,afterWithdraw:function(){F(!1),ee()},availableBalance:q,className:"trading-dialog",nested:!0,lang:j})]})}var I=c.p+"static/media/close-position-icon.6e2b1ee2.svg";var B=function(e){var t=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e=t.current;e&&e.querySelectorAll("[tip]").forEach((function(t){var c=null;t.addEventListener("mouseover",(function(e){var t=e.currentTarget.getAttribute("tip");if(t){var n="hover-box-".concat((new Date).getTime());c=document.body.querySelector("#".concat(n)),(c=document.createElement("div")).style.cssText="z-index : 9;min-width : 100px;max-width : ".concat(window.screen.width,"px ;font-size : 12px ;position : absolute;background-color: #2c2d31;border: 1px solid #AAAAAA;color: #AAAAAA;border-radius: 10px;padding: 4px;"),document.body.appendChild(c),c.innerText=t,c.id=n,c.style.display="block";var i=e.currentTarget.getBoundingClientRect();if(c.style.top="".concat(i.y+i.height+window.document.documentElement.scrollTop,"px"),c.offsetWidth+e.pageX>window.screen.width)if(e.pageX-c.offsetWidth>=0)c.style.left="".concat(e.pageX-c.offsetWidth,"px");else{var a=e.pageX-c.offsetWidth/2>0?e.pageX-c.offsetWidth/2:0;c.style.left="".concat(a,"px")}else c.style.left="".concat(e.pageX,"px")}})),e.addEventListener("mouseout",(function(e){c&&c.remove()}))}));return function(){t.current=null}}),[e.title]),e.block?Object(x.jsx)("div",{ref:t,children:e.children}):Object(x.jsx)("span",{ref:t,children:e.children})},M=Object(b.a)(D);function Q(e){var t=e.trading,c=e.wallet,a=e.lang,s=Object(i.useState)(Object(x.jsx)("span",{})),l=Object(n.a)(s,2),r=l[0],o=l[1];return Object(i.useEffect)((function(){var e="";c.isConnected()&&t.position.liquidationPrice&&(t.position.liquidationPrice.numPositions>1?t.position.liquidationPrice.price1&&t.position.liquidationPrice.price2?e=Object(x.jsxs)("span",{children:[Object(x.jsx)(p,{decimalScale:2,value:t.position.liquidationPrice.price1}),Object(x.jsx)("span",{children:" / "}),Object(x.jsx)(p,{decimalScale:2,value:t.position.liquidationPrice.price2})]}):t.position.liquidationPrice.price1||t.position.liquidationPrice.price2?!t.position.liquidationPrice.price1&&t.position.liquidationPrice.price2?e=Object(x.jsxs)("span",{children:[Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{className:"funding-fee",tip:a["liq-price-hover-three"],children:" ? "})}),Object(x.jsx)("span",{children:" / "}),Object(x.jsxs)("span",{children:[" ",Object(x.jsx)(p,{decimalScale:2,value:t.position.liquidationPrice.price2})," "]})]}):t.position.liquidationPrice.price1&&!t.position.liquidationPrice.price2&&(e=Object(x.jsxs)("span",{children:[Object(x.jsxs)("span",{children:[" ",Object(x.jsx)(p,{decimalScale:2,value:t.position.liquidationPrice.price1})," "]}),Object(x.jsx)("span",{children:" / "}),Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{className:"funding-fee",tip:a["liq-price-hover-three"],children:" ? "})})]})):e=Object(x.jsxs)("span",{children:[Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{className:"funding-fee",tip:a["liq-price-hover-three"],children:" ? "})}),Object(x.jsx)("span",{children:" / "}),Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{className:"funding-fee",tip:a["liq-price-hover-three"],children:" ? "})})]}):t.position.liquidationPrice.price1&&t.position.liquidationPrice.price2?e=Object(x.jsxs)("span",{children:[Object(x.jsx)(p,{decimalScale:2,value:t.position.liquidationPrice.price1}),Object(x.jsx)("span",{children:" / "}),Object(x.jsx)(p,{decimalScale:2,value:t.position.liquidationPrice.price2})]}):t.position.liquidationPrice.price1||t.position.liquidationPrice.price2?!t.position.liquidationPrice.price1&&t.position.liquidationPrice.price2?e=Object(x.jsxs)("span",{children:[Object(x.jsxs)(B,{block:!1,children:[" ",Object(x.jsx)("span",{className:"funding-fee",tip:a["liq-price-hover-two"],children:" -- "})]}),Object(x.jsx)("span",{children:" / "}),Object(x.jsxs)("span",{children:[" ",Object(x.jsx)(p,{decimalScale:2,value:t.position.liquidationPrice.price2})," "]})]}):t.position.liquidationPrice.price1&&!t.position.liquidationPrice.price2&&(e=Object(x.jsxs)("span",{children:[Object(x.jsxs)("span",{children:[" ",Object(x.jsx)(p,{decimalScale:2,value:t.position.liquidationPrice.price1})," "]}),Object(x.jsx)("span",{children:" / "}),Object(x.jsxs)(B,{block:!1,children:[" ",Object(x.jsx)("span",{className:"funding-fee",tip:a["liq-price-hover-two"],children:" -- "})]})]})):e=Object(x.jsxs)("span",{children:[Object(x.jsxs)(B,{block:!1,children:[" ",Object(x.jsx)("span",{className:"funding-fee",tip:a["liq-price-hover-two"],children:" -- "})]}),Object(x.jsx)("span",{children:" / "}),Object(x.jsxs)(B,{block:!1,children:[" ",Object(x.jsx)("span",{className:"funding-fee",tip:a["liq-price-hover-two"],children:" -- "})]})]}),o(e))}),[t.position,c.detail]),Object(x.jsx)("span",{children:r})}var E=Object(O.b)("wallet","trading","version","type")(Object(O.c)((function(e){var t=e.wallet,c=e.trading,a=e.version,d=e.lang,b=e.type,u=Object(i.useState)(!1),A=Object(n.a)(u,2),m=A[0],O=A[1],g=Object(i.useState)(""),h=Object(n.a)(g,2),N=h[0],w=h[1],y=Object(i.useState)(""),k=Object(n.a)(y,2),S=k[0],C=k[1],D=Object(i.useState)(""),E=Object(n.a)(D,2),P=(E[0],E[1]),T=Object(i.useState)(!1),F=Object(n.a)(T,2),R=F[0],Y=F[1],J=Object(i.useState)(""),G=Object(n.a)(J,2),H=(G[0],G[1],function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0,a=Math.abs(e);return/^[1-9]{1,}0{9,}$/.test(a)?(e=(e=e.toString()).replace(/000000000$/,""),c=" g".concat(c)):/000$/.test(a)&&(e=(e=e.toString()).replace(/000$/," "),c=" k".concat(c)),Object(x.jsx)(p,{value:e,isNumericString:!0,decimalScale:t,allowZero:i,prefix:n,suffix:" ".concat(c)})}),U=function(){var e=Object(r.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,v.a.request("closePosition",[t.detail.chainId,c.symbolInfo.address,t.detail.account,c.symbolInfo.symbol],{includeResponse:!0});case 3:n=e.sent,O(!1),n.success?q():"string"===typeof n.error?alert(n.error||d["close-position-failed"]):"object"===Object(l.a)(n.error)?alert(n.error.errorMessage||d["close-position-failed"]):alert(d["close-position-failed"]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){c.refresh()},Z=j()("Direction","info-num",{LONG:+c.position.volume>0,SHORT:+c.position.volume<0});return Object(i.useEffect)((function(){if(c.position){var e=c.position,t=+e.volume>0?d.long:Object(f.b)(e.volume,0)||!e.volume?"--":d.short;w(t),C(Object(o.bg)(e.margin).plus(e.unrealizedPnl).toString()),P(Object(o.bg)(e.margin).plus(e.unrealizedPnl).minus(e.marginHeld).toString())}return function(){}}),[c.position.volume,c.position.margin,c.position.unrealizedPnl]),Object(x.jsxs)("div",{className:"position-info",children:[Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"info-left",children:[Object(x.jsx)("div",{className:"title-text",children:d.position}),Object(x.jsx)("div",{className:"info-num",children:Object(x.jsx)(p,{value:c.position.volume,thousandSeparator:!0,allowZero:!0})})]}),Object(x.jsx)("div",{className:"info-right",children:Object(x.jsxs)("div",{className:"close-position",id:"close-p",onClick:U,children:[Object(x.jsx)("span",{className:"spinner spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{display:m?"block":"none"}}),Object(x.jsx)("img",{src:I})," ",d.close]})})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"info-left",children:[Object(x.jsx)("div",{className:"title-text",children:"Entry Price"}),Object(x.jsxs)("div",{className:"info-num",children:[b.isFuture&&H(c.position.averageEntryPrice,c.symbolInfo.getDecimalBySymbol&&c.symbolInfo.getDecimalBySymbol(c.position.symbol)),b.isOption&&H(c.position.averageEntryPrice,2)]})]}),Object(x.jsx)("div",{className:"info-right"})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"info-left",children:[Object(x.jsx)("div",{className:"title-text",children:"Mark Price"}),Object(x.jsxs)("div",{className:"info-num",children:[b.isFuture&&H(c.position.markPrice,c.symbolInfo.getDecimalBySymbol&&c.symbolInfo.getDecimalBySymbol(c.position.symbol)),b.isOption&&H(c.position.markPrice,2)]})]}),Object(x.jsx)("div",{className:"info-right"})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"info-left",children:[Object(x.jsx)("div",{className:"title-text balance-con",children:d["dynamic-effective-balance"]}),Object(x.jsx)("div",{className:"info-num",children:Object(x.jsx)(p,{decimalScale:2,allowZero:!0,value:S})})]}),Object(x.jsx)("div",{className:"info-right action ".concat(a.current),children:Object(x.jsxs)("div",{onClick:function(){return Y(!0)},children:[Object(x.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAASCAYAAAC5DOVpAAAACXBIWXMAAAsSAAALEgHS3X78AAAArUlEQVQ4ja2UUQ0CMQxAHwQBOEACSDgJOMDCOWAoOAuggElAAjg5FJQ0lMuyDHIbfUmzj3Zv3ZoMEfkWQd4Ey/cisvtRz5L5rIFoa5EambIBbl4yZQucvWTKAei9ZMoA7P+VnYCFRUwTq6xQT7o29WmdBUBsjXZyDdP+0jU1eWntrIRO6uElG4EOeHrIUuE4V5ZPM+dugb1laO2sGldZes2jRTv2sX0+wlaCiPACF2WaE4qSlAwAAAAASUVORK5CYII=",alt:"Remove margin"})," ",d.detail]})})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"info-left",children:[Object(x.jsx)("div",{className:"title-text",children:d.direction}),Object(x.jsx)("div",{className:Z,children:N})]}),Object(x.jsx)("div",{className:"info-right"})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"info-left",children:[Object(x.jsx)("div",{className:"title-text",children:Object(x.jsx)(B,{children:Object(x.jsx)("div",{className:"funding-fee",tip:"The margin frozen by this single position.",children:"Margin Usage"})})}),Object(x.jsx)("div",{className:"info-num",children:Object(x.jsx)(p,{value:c.position.marginHeldBySymbol,decimalScale:2})})]}),Object(x.jsx)("div",{className:"info-right"})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"info-left",children:[Object(x.jsx)("div",{className:"title-text",children:d["unrealized-pnl"]}),Object(x.jsx)("div",{className:"info-num",children:Object(x.jsxs)("span",{className:"pnl-list",children:[Object(x.jsx)(p,{value:c.position.unrealizedPnl,decimalScale:8}),Object(x.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQ4jaVV223DMAy8BvmvRvAG8QgeISN4lIyQDeoRMoK7gUfQBnUnYMH0LmAU2YETAoQhPs4niWd/mBkWLAE4AmiK9ATgstS0q8QcaADwA6Cv5E4AZj4fzRkG78xsNrOLmTVFrqyb6CnmYlFr/9avAJU+mFmOoCpIZLYFTO6gYwk4cJtbwUQmi4wC9uTMnnnP84QW4xtg8iupHedsrIxNCrG+GKGWsxhrvh1rT8AcwBz8wKaOw/3F/MzB9ppPPttysHNYq0GK0PqXnhnLoebO9oFZ3N7IbaupKwA61p2Lo7peylE39IZrUpJAZsrpVdCT5jgGXmXZREIxMVExW1Xifefax0ESGsovyAozB7uTbO2NrpqbNhdY+RH5Nm/MlgDl0qabv0CumLOqXuLaL8DNVVT7BfhwPxqAP4UiW3Wp1wTfAAAAAElFTkSuQmCC",alt:"unrealizePnl"}),Object(x.jsx)("div",{className:"pnl-box",children:c.position.unrealizedPnlList&&c.position.unrealizedPnlList.map((function(e,t){return Object(x.jsxs)("div",{className:"unrealizePnl-item",children:[Object(x.jsx)("span",{children:e[0]}),Object(x.jsx)("span",{children:Object(x.jsx)(p,{value:e[1],decimalScale:8})})]},t)}))})]})})]}),Object(x.jsx)("div",{className:"info-right"})]}),Object(x.jsxs)("div",{className:"info",children:[b.isFuture&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"info-left",children:[Object(x.jsx)(B,{children:Object(x.jsx)("div",{className:"title-text  funding-fee",tip:d["funding-fee-tip"],children:d["funding-fee"]})}),Object(x.jsx)("div",{className:"info-num",children:Object(x.jsx)(p,{value:-c.position.fundingFee,decimalScale:8})})]}),Object(x.jsx)("div",{className:"info-right"})]}),b.isOption&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"info-left",children:[Object(x.jsx)(B,{children:Object(x.jsx)("div",{className:"title-text  funding-fee",tip:d["funding-fee-tip"],children:d["funding-fee"]})}),Object(x.jsx)("div",{className:"info-num",children:Object(x.jsx)(p,{value:-c.position.premiumFundingAccrued,decimalScale:8})})]}),Object(x.jsx)("div",{className:"info-right"})]})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"info-left",children:[Object(x.jsxs)("div",{className:"title-text",children:[Object(x.jsx)("span",{}),b.isOption?Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{className:"funding-fee",tip:d["liq-price-hover-one"],children:d["liquidation-price"]})}):Object(x.jsx)("span",{children:d["liquidation-price"]})]}),Object(x.jsx)("div",{className:"info-num",children:b.isOption?Object(x.jsx)(Q,{trading:c,wallet:t,lang:d}):Object(x.jsx)(p,{decimalScale:4,value:c.position.liquidationPrice})})]}),Object(x.jsx)("div",{className:"info-right"})]}),Object(x.jsx)(M,{wallet:t,modalIsOpen:R,onClose:function(){Y(!1)},spec:c.config,afterDepositAndWithdraw:function(){q()},position:c.position,overlay:{background:"#1b1c22",top:80},className:"balance-list-dialog",lang:d})]})}))),P=c(1474),T=c.n(P);var F=c(74),R=F[o.DeriEnv.get()].chainInfo;function Y(e){var t=e.wallet,c=e.his,a=Object(i.useState)(!1),s=Object(n.a)(a,2),l=s[0],r=s[1],o=function(){r(!0)},d=function(){r(!1)},b=j()("view",{hover:l});return Object(x.jsxs)("span",{className:b,onMouseOut:d,children:[Object(x.jsx)("span",{className:"view-space",onMouseOver:o,children:Object(x.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"".concat(R[t.detail.chainId].viewUrl,"tx/").concat(c.transactionHash),children:["View at ",R[t.detail.chainId].viewUrl]})}),Object(x.jsx)("span",{className:"right-arrow",onMouseOver:o,children:Object(x.jsx)("img",{alt:"",src:"data:image/png;base64,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"})}),Object(x.jsx)("span",{className:"view-arrow",onMouseOver:o,onMouseOut:d,children:Object(x.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(R[t.detail.chainId].viewUrl,"tx/").concat(c.transactionHash),children:Object(x.jsx)("img",{rel:"noreferrer",alt:"",src:"data:image/svg+xml;base64,DQo8c3ZnIGZpbGw9Im5vbmUiIGhlaWdodD0iMTAiIHdpZHRoPSIxMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNOC42NzYuNjQyYS42NS42NSAwIDAwLS4wNzIuMDA2SDQuNzkzYS42NS42NSAwIDAwLS41Ny45NzUuNjUuNjUgMCAwMC41Ny4zMjJINy4xMkwuNDM4IDguNjE0YS42NDcuNjQ3IDAgMDAuMjg2IDEuMDk2LjY1LjY1IDAgMDAuNjMyLS4xNzlMOC4wNCAyLjg2MXYyLjMyNGEuNjQ4LjY0OCAwIDAwLjk3Ny41Ny42NDguNjQ4IDAgMDAuMzIyLS41N1YxLjM4YS42NDcuNjQ3IDAgMDAtLjY2Mi0uNzM3eiIgZmlsbD0iI0FBQUFBQSIvPg0KPC9zdmc+DQoNCg=="})})})]})}var J=Object(O.b)("wallet","trading","type")(Object(O.c)((function(e){var t=e.wallet,c=e.trading,a=e.lang,l=e.type,o=Object(i.useState)([]),d=Object(n.a)(o,2),j=d[0],b=d[1];function u(){return(u=Object(r.a)(s.a.mark((function e(){var n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isConnected()&&c.configs&&c.config&&c.contract&&(n=c.history,i=n.map((function(e){e.directionText=a["long-buy"],"SHORT"===e.direction?e.directionText=a["short-sell"]:"liquidation"===e.direction.toLowerCase()&&(e.directionText=a.liquidation);var t=c.config;return t&&(e.symbol=e.symbol?e.symbol:t.symbol,e.baseTokenText=e.baseToken?" ".concat(e.symbol," / ").concat(e.baseToken):e.symbol),e})),b(i));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){return function(){u.apply(this,arguments)}(),function(){}}),[t.detail,c.configs,c.config,c.history]),Object(x.jsxs)("div",{className:"history-info","v-show":"historyShow",children:[j.map((function(e,c){return Object(x.jsxs)("div",{className:"history-box",children:[Object(x.jsxs)("div",{className:"direction-bToken-price",children:[Object(x.jsxs)("span",{className:"direction",children:[Object(x.jsxs)("span",{className:"".concat(e.direction),children:[" ",e.directionText]}),Object(x.jsx)("span",{className:"basetoken",children:e.baseTokenText}),Object(x.jsx)(Y,{wallet:t,his:e})]}),Object(x.jsx)("span",{className:"history-text time",children:T.a.asString("yyyy-MM-dd hh:mm:ss",new Date(parseInt(e.time)))})]}),Object(x.jsxs)("div",{className:"time-price-volume",children:[Object(x.jsxs)("div",{className:"history-price",children:[Object(x.jsxs)("div",{className:"history-title",children:[" ",l.isOption?a["volume-notional-price"]:a["volume-price"]]}),Object(x.jsxs)("div",{className:"history-text",children:[Object(x.jsx)(p,{value:e.volume,thousandSeparator:!0,allowZero:!0})," @ ",Object(x.jsx)(p,{value:e.price,decimalScale:4,displayType:"text"})]})]}),Object(x.jsxs)("div",{className:"notional",children:[Object(x.jsxs)("div",{className:"history-title",children:[" ",l.isOption?a["contract-value"]:a.notional]}),Object(x.jsx)("div",{className:"history-text",children:Object(x.jsx)(p,{value:e.notional,decimalScale:4})})]}),Object(x.jsxs)("div",{className:"history-fee",children:[Object(x.jsx)("div",{className:"history-title pc",children:a["transaction-fee"]}),Object(x.jsx)("div",{className:"history-title mobile",children:a["transaction-fee"]}),Object(x.jsx)("div",{className:"history-text",children:Object(x.jsx)(p,{value:e.transactionFee,decimalScale:4})})]})]})]},c)})),0===+j.length?Object(x.jsx)("div",{className:"no-data",children:a["no-data"]}):""]})})));var G=Object(O.b)("wallet","trading","type")(Object(O.c)((function(e){e.wallet;var t=e.trading,c=e.lang,n=e.type;return Object(x.jsxs)("div",{className:"contract-box",children:[Object(x.jsx)("div",{className:"contract-header"}),Object(x.jsxs)("div",{className:"contract-info",children:[Object(x.jsx)("div",{className:"conntract-header",children:c["contract-info"]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"title",children:["Base Token",Object(x.jsx)(B,{children:Object(x.jsx)("span",{className:"margin-per",tip:"Discount Factor is the effective ratio of the margin token counted as collateral (converted into dynamic effective balance). For example: posting 10 USD in CAKE token (with DiscountFactor = 0.685) to your margin account will increase your dynamic effective margin by 6.85 USD.",children:"(Discount Factor)"})})]}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(B,{children:Object(x.jsxs)("span",{className:"margin-per btoken-mu",tip:t.baseTokenTip,children:[t.contract.bTokenSymbol&&t.contract.bTokenSymbol.map((function(e,c){return c<3?Object(x.jsxs)("span",{className:"btoken-symbol",children:[e,"(",t.contract.bTokenMultiplier[c],")"]},c):null})),"..."]})})})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("div",{className:"title",children:c.symbol}),Object(x.jsx)("div",{className:"text",children:t.contract.displaySymbol})]}),(n.isFuture||n.isPower)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"title",children:[" ",Object(x.jsx)("span",{children:"Min.Trade Unit (Notional)"})," "]}),Object(x.jsx)("div",{className:"text",children:t.contract.minTradeUnit?t.contract.minTradeUnit+t.symbolInfo.unit:""})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("div",{className:"title",children:"Funding Rate Coefficient"}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(B,{children:Object(x.jsx)("span",{className:"margin-per",tip:t.fundingCoefficientTip,children:t.contract.fundingRateCoefficient&&(+t.contract.fundingRateCoefficient).toExponential()})})})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("div",{className:"title",children:Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{tip:"Initial Margin Ratio is the percentage of notional value that your margin will be frozen to open a new position.",className:"margin-per",children:c["initial-margin-ratio"]})})}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(m.a,{displayType:"text",value:100*t.contract.initialMarginRatio,decimalScale:2,suffix:"%"})})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"title",children:[" ",Object(x.jsx)(B,{block:!1,children:Object(x.jsxs)("span",{tip:"Maintenance Margin Ratio is the percentage of notional value required to keep your open positions from being liquidated.",className:"margin-per",children:[" ",c["maintenance-margin-ratio"]]})})," "]}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(m.a,{displayType:"text",value:100*t.contract.maintenanceMarginRatio,decimalScale:2,suffix:"%"})})]}),n.isPower&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("div",{className:"title",children:Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{tip:"Maintenance Margin Ratio is the percentage of notional value required to keep your open positions from being liquidated.",className:"margin-per",children:"Multiplier"})})}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(m.a,{displayType:"text",value:t.contract.displayMultiplier})})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"title",children:[" ",Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{tip:t.symbolInfo?"Funding period is the time period for which the funding fee (".concat(t.symbolInfo.symbol," Mark Price - ").concat(t.symbolInfo.symbol," ) is paid. For Funding Period = 7 days, every second a long (short) contract pays (receives) a funding fee=(").concat(t.symbolInfo.symbol," Mark Price - ").concat(t.symbolInfo.symbol," ))/(7*24*60*60)"):"",className:"margin-per",children:" Funding Period"})})," "]}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(m.a,{displayType:"text",value:Object(o.bg)(t.contract.fundingPeriod).div(86400).toFixed(0),decimalScale:2,suffix:"Days"})})]})]})]}),n.isOption&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("div",{className:"title",children:c.underlier}),Object(x.jsx)("div",{className:"text",children:t.contract.underlier})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("div",{className:"title",children:c.strike}),Object(x.jsx)("div",{className:"text",children:t.contract.strike})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("div",{className:"title",children:c["option-type"]}),Object(x.jsx)("div",{className:"text",children:t.contract.optionType})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"title",children:[" ",Object(x.jsx)("span",{children:" Min.Trade Unit (Notional)"})," "]}),Object(x.jsxs)("div",{className:"text",children:[t.contract.multiplier," ",t.config?t.config.unit:""]})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("div",{className:"title",children:Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{tip:t.initialMarginRatioTip,className:"margin-per",children:c["initial-margin-ratio"]})})}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(m.a,{displayType:"text",value:100*t.contract.initialMarginRatio,decimalScale:2,suffix:"%"})})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"title",children:[" ",Object(x.jsx)(B,{block:!1,children:Object(x.jsxs)("span",{tip:t.maintenanceMarginRatioTip,className:"margin-per",children:[" ",c["maintenance-margin-ratio"]]})})," "]}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(m.a,{displayType:"text",value:100*t.contract.maintenanceMarginRatio,decimalScale:2,suffix:"%"})})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsxs)("div",{className:"title",children:[" ",Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{tip:t.maintenanceMarginRatioTip,className:"margin-per",children:"Funding Period"})})," "]}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(m.a,{displayType:"text",value:Object(o.bg)(t.contract.fundingPeriod).div(86400).toFixed(0),decimalScale:2,suffix:"Days"})})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("div",{className:"title",children:" Delta "}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(m.a,{displayType:"text",value:t.contract.delta,decimalScale:2})})]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("div",{className:"title",children:" Gamma "}),Object(x.jsx)("div",{className:"text",children:Object(x.jsx)(m.a,{displayType:"text",value:t.contract.gamma,decimalScale:7})})]})]}),Object(x.jsxs)("div",{className:"info",children:[(n.isFuture||n.isPower)&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"title",children:c["transaction-fee"]})}),n.isOption&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"title",children:Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{className:"margin-per",tip:t.TransactionFeeTip,children:c["transaction-fee"]})})})}),Object(x.jsxs)("div",{className:"text",children:[n.isOption&&Object(x.jsx)(x.Fragment,{children:"".concat(t.feeDisplay.join(" "),"%")}),"C"!==t.contract.optionType&&Object(x.jsxs)(x.Fragment,{children:[t.contract.strike<t.index&&Object(x.jsxs)(x.Fragment,{children:[c["eo-mark-price"]," * ",Object(x.jsx)(m.a,{displayType:"text",value:100*t.contract.feeRatioOTM,decimalScale:3,suffix:"%"})]}),t.contract.strike>=t.index&&Object(x.jsxs)(x.Fragment,{children:[t.contract.underlier," ",c.price," * ",Object(x.jsx)(m.a,{displayType:"text",value:100*t.contract.feeRatioITM,decimalScale:3,suffix:"%"})]})]}),(n.isFuture||n.isPower)&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(m.a,{displayType:"text",value:100*t.contract.feeRatio,decimalScale:3,suffix:"%"})})]})]})]})]})}))),H=c(138),U=c(1705);c(1478),c(1479),U.b.Handle;var q=c(33);c(100);var Z=c.p+"static/media/arrow-down.c9c2a22d.svg",z=c.p+"static/media/arrow-up.06ad8eca.svg";function L(e){e.version;var t=e.spec;return e.type.isOption?"".concat(t&&t.formatedSymbol||"BTCUSD-100000-C"):"".concat(t&&t.formatedSymbol||"BTCUSD")}var W=Object(O.b)("trading","version","loading","type","wallet")(Object(O.c)((function(e){var t=e.trading,c=e.loading,a=e.type,s=e.wallet,l=Object(i.useState)(!1),r=Object(n.a)(l,2),o=r[0],d=r[1],b=Object(i.useState)([]),u=Object(n.a)(b,2),A=u[0],m=u[1],O=j()("dropdown-menu",{show:o});return Object(i.useEffect)((function(){var e=function(e){document.querySelector(".btn-group")&&!document.querySelector(".btn-group").contains(e.target)&&d(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),Object(i.useEffect)((function(){if(t.symbolInfos.length){var e=a.current;"future"===a.current&&(e="futures");var c=t.symbolInfos.filter((function(t){return t.category===e}));m(c)}}),[t,t.symbolInfos,a]),Object(x.jsxs)("div",{className:"btn-group check-baseToken-btn",children:[Object(x.jsxs)("button",{type:"button",onClick:function(e){e.preventDefault(),d(!o)},className:"btn chec",children:[Object(x.jsx)(L,{spec:t.symbolInfo,type:a}),Object(x.jsx)("span",{className:"check-base-down",children:o?Object(x.jsx)("img",{src:z,alt:""}):Object(x.jsx)("img",{src:Z,alt:""})})]}),Object(x.jsx)("div",{className:O,children:A.map((function(e,n){return Object(x.jsx)("div",{className:"dropdown-item",onClick:function(n){return function(e){var n=t.symbolInfos.find((function(t){return t.pool===e.pool&&e.symbol===t.symbol}));n&&(c.loading(),t.pause(),t.setCurrentSymbol(n),t.loadBySymboInfo(s,n,(function(){c.loaded()}),a.isOption),d(!1))}(e)},children:Object(x.jsx)(L,{spec:e,type:a})},n)}))})]})}))),K=(c(1480),Object(b.a)((function(e){e.wallet;var t=e.spec,c=e.onClose,a=e.direction,l=e.volume,d=e.position,j=void 0===d?0:d,b=(e.indexPrice,e.leverage,e.afterLeverage,e.transFee,e.afterTrade),u=e.lang,A=(e.markPriceAfter,e.trading),O=(e.liquidationPrice,Object(i.useState)(!1)),f=Object(n.a)(O,2),h=f[0],v=f[1],N=function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,A.doTransaction();case 3:e.sent.success?(b(),c()):alert("Failed"),v(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){h||c()};return"long"===a?Object(o.bg)(l).plus(Object(o.bg)(j)).toString():Object(o.bg)(j).minus(Object(o.bg)(l)).toString(),Object(x.jsx)("div",{className:"modal-dialog",children:Object(x.jsxs)("div",{className:"modal-content",children:[Object(x.jsxs)("div",{className:"modal-header",children:[Object(x.jsx)("div",{className:"title",children:u.confirm}),Object(x.jsx)("div",{className:"close","data-dismiss":"modal",onClick:w,children:Object(x.jsx)("span",{children:"\xd7"})})]}),Object(x.jsx)("div",{className:"modal-body",children:Object(x.jsxs)("div",{className:"contract-box-info",children:[Object(x.jsxs)("div",{className:"top",children:[Object(x.jsxs)("div",{className:"text",children:[Object(x.jsx)("div",{className:"text-title",children:u["of-contracts"]}),Object(x.jsxs)("div",{className:"text-num",children:[Object(x.jsx)(p,{value:A.volumeChanged.totalVolume,thousandSeparator:!0,allowZero:!0})," ",A.symbolInfo.unit]})]}),Object(x.jsxs)("div",{className:"text",children:[Object(x.jsx)("div",{className:"text-title",children:"Trade Price (est.)"}),Object(x.jsxs)("div",{className:"text-num",children:[Object(x.jsx)(p,{value:A.impactPreview.tradePrice,thousandSeparator:!0,allowZero:!0})," "]})]}),Object(x.jsxs)("div",{className:"text",children:[Object(x.jsx)("div",{className:"text-title",children:u.direction}),Object(x.jsx)("div",{className:"text-num",children:Object(x.jsx)("span",{className:a,children:u[a.toLowerCase()]})})]}),Object(x.jsxs)("div",{className:"text",children:[Object(x.jsx)("div",{className:"text-title",children:u["transaction-fee"]}),Object(x.jsx)("div",{className:"text-num",children:Object(x.jsx)(m.a,{value:A.impactPreview.fee,decimalScale:2,suffix:" ".concat(t.bTokenSymbol),displayType:"text"})})]}),Object(x.jsxs)("div",{className:"text",children:[Object(x.jsx)("div",{className:"text-title",children:"Margin Usage"}),Object(x.jsx)("div",{className:"text-num",children:Object(x.jsx)(m.a,{value:A.impactPreview.marginUsage,decimalScale:2,suffix:" ".concat(t.bTokenSymbol),displayType:"text"})})]}),Object(x.jsxs)("div",{className:"text",children:[Object(x.jsx)("div",{className:"text-title",children:"Available Margin"}),Object(x.jsx)("div",{className:"text-num",children:Object(x.jsx)(m.a,{value:A.impactPreview.availableMargin,decimalScale:2,suffix:" ".concat(t.bTokenSymbol),displayType:"text"})})]}),q.a.isFuture&&Object(x.jsxs)("div",{className:"text",children:[Object(x.jsx)("div",{className:"text-title",children:u["liquidation-price"]}),Object(x.jsx)("div",{className:"text-num",children:Object(x.jsx)(m.a,{value:A.impactPreview.liqPrice,decimalScale:2,displayType:"text"})})]})]}),Object(x.jsx)("div",{className:"modal-footer",children:Object(x.jsxs)("div",{className:"long-btn","v-if":"confirm",children:[Object(x.jsx)("button",{className:"cancel",onClick:w,children:u.cancel}),Object(x.jsx)(g,{className:"confirm",btnText:u.ok,click:N,lang:u})]})})]})})]})})}))),V=(Object(b.a)(N),Object(b.a)(w),Object(b.a)(D));function X(e){var t=e.wallet,c=e.spec,a=e.volume,l=e.available,d=e.baseToken,j=e.leverage,b=e.indexPrice,u=e.position,A=e.afterTrade,m=e.direction,O=e.trading,p=(e.version,e.lang),f=(e.type,e.afterLeverage),h=Object(i.useState)(!0),v=Object(n.a)(h,2),N=v[0],w=(v[1],Object(i.useState)(!0)),y=Object(n.a)(w,2),k=y[0],S=y[1],C=Object(i.useState)(!1),D=Object(n.a)(C,2),I=D[0],B=D[1],M=Object(i.useState)(!1),Q=Object(n.a)(M,2),E=Q[0],P=Q[1],T=Object(i.useState)(""),F=Object(n.a)(T,2),R=(F[0],F[1]),Y=Object(H.b)();Object(i.useEffect)((function(){Y.isConnected()&&(t.setDetail(Y),window.ethereum=Y.ethereum)}),[Y,p]);var J=function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){O.refresh(),P(!1)},U=function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isConnected();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(r.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConnected()||!c){e.next=5;break}return e.next=3,Object(o.getWalletBalance)(t.detail.chainId,c.pool,t.detail.account,c.symbol).catch((function(e){return console.error("getWalletBalance was error,maybe network is Wrong")}));case 3:(n=e.sent)&&R(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){return t.isConnected()&&c&&q(),function(){}}),[t.detail.account,c,l]),Object(i.useEffect)((function(){return S(!a),function(){}}),[a]),Object(i.useEffect)((function(){return c&&U(),function(){}}),[t.detail.isApproved,c]);var Z=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(K,{wallet:t,className:"trading-dialog",spec:c,modalIsOpen:I,onClose:function(){return B(!1)},leverage:j,baseToken:d,volume:a,position:u.volume,indexPrice:b,afterTrade:A,direction:m,lang:p,afterLeverage:f,trading:O}),Object(x.jsx)("button",{className:"short-submit",onClick:function(){return B(!0)},children:p.trade})]});return t.isConnected()?N?!l||+l<=0?Z=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(V,{wallet:t,modalIsOpen:E,onClose:G,spec:c,afterDepositAndWithdraw:G,position:O.position,overlay:{background:"#1b1c22",top:80},className:"balance-list-dialog",lang:p}),Object(x.jsx)("div",{className:"noMargin-text",children:0!==+O.position.marginHeld&&O.position.marginHeld?p["not-enough-margin-tip"]:p["no-margin-tip"]}),Object(x.jsx)("button",{className:"short-submit",onClick:function(){return P(!0)},children:p.deposit})]}):k&&(Z=Object(x.jsx)("button",{className:"btn btn-danger short-submit",children:p["enter-volume"]})):Z=Object(x.jsx)(g,{className:"approve",btnText:p.approve,click:J,lang:p}):Z=Object(x.jsx)(g,{className:"btn btn-danger connect",btnText:p["connect-wallet"],click:function(){Y.connect()},lang:p}),Object(x.jsx)("div",{className:"submit-btn",children:Z})}var _=Object(O.b)("wallet","trading","version","type")(Object(O.c)((function(e){var t=e.wallet,c=void 0===t?{}:t,a=e.trading,l=e.version,d=e.lang,b=e.type,u=Object(i.useState)("long"),A=Object(n.a)(u,2),m=A[0],O=A[1],f=Object(i.useState)(),g=Object(n.a)(f,2),h=g[0],v=g[1],N=Object(i.useState)(),w=Object(n.a)(N,2),y=w[0],k=w[1],S=Object(i.useState)({}),C=Object(n.a)(S,2),D=(C[0],C[1]),I=Object(i.useState)("rise"),M=Object(n.a)(I,2),Q=M[0],E=M[1],P=Object(i.useState)("rise"),T=Object(n.a)(P,2),F=T[0],R=T[1],Y=Object(i.useState)("0.000"),J=Object(n.a)(Y,2),G=J[0],H=J[1],U=Object(i.useState)(""),q=Object(n.a)(U,2),Z=(q[0],q[1]),z=Object(i.useState)(!0),L=Object(n.a)(z,2),K=(L[0],L[1]),_=Object(i.useState)(!1),$=Object(n.a)(_,2),ee=$[0],te=$[1],ce=Object(i.useState)(""),ne=Object(n.a)(ce,2),ie=ne[0],ae=ne[1],se=Object(i.useState)(!1),le=Object(n.a)(se,2),re=le[0],oe=le[1],de=Object(i.useState)(!1),je=Object(n.a)(de,2),be=je[0],ue=(je[1],Object(i.useState)(!1)),Ae=Object(n.a)(ue,2),me=Ae[0],Oe=Ae[1],xe=Object(i.useState)(""),pe=Object(n.a)(xe,2),fe=(pe[0],pe[1]),ge=Object(i.useRef)(),he=Object(i.useRef)(),ve=j()("checked-long","check-long-short"," long-short",{"checked-short":"short"===m}),Ne=j()("contrant-input",{inputFamliy:""!==a.volume}),we=function(){ye(),a.refresh()},ye=function(){var e=Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.isConnected()||!a.symbolInfo){e.next=5;break}return e.next=3,Object(o.getWalletBalance)(c.detail.chainId,a.symbolInfo.address,c.detail.account,a.symbolInfo.bTokenId).catch((function(e){return console.log(e)}));case 3:(t=e.sent)&&Z(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(e){a.setVolume(""),O(e),a.setDirection(e)};return Object(i.useEffect)((function(){var e;return a.position&&a.position.volume&&(e=+a.position.volume,O(e>=0?"long":"short")),function(){}}),[a.position.volume]),Object(i.useEffect)((function(){return be||""===a.displayVolume?c.detail.account&&a.resume():a.pause(),function(){}}),[a.displayVolume,be]),Object(i.useEffect)((function(){return ye(),function(){}}),[c.detail.account,a.symbolInfo,a.accountInfo.dynEffMargin]),Object(i.useEffect)((function(){var e=a.position?a.position.indexPrice:"";ge.current>e?E("fall"):E("rise"),ge.current=e,k(e)}),[a.position.indexPrice,a.position]),Object(i.useEffect)((function(){if(a.position){var e=a.position;fe(Object(o.bg)(e.margin).plus(e.unrealizedPnl).minus(e.marginHeld).toString())}return function(){}}),[a.position.volume,a.position.margin,a.position.unrealizedPnl]),Object(i.useEffect)((function(){var e=a.position?a.position.markPrice:"";return he.current>e?R("fall"):R("rise"),he.current=e,v(e),function(){document.querySelector("head title").innerText="deri"}}),[a.index,a.position,a.markPrice,a.symbolInfo,a.priceDecimals]),Object(i.useEffect)((function(){return a.symbolInfo&&D(a.symbolInfo),function(){}}),[a.symbolInfo]),Object(i.useEffect)((function(){return a.margin&&a.direction&&O(a.direction),function(){}}),[a.margin]),Object(i.useEffect)((function(){var e="0.000";a.contract.minTradeUnit<=1?e=a.contract.minTradeUnit.toString().replace(/1/gi,"0"):e=a.contract.minTradeUnit;H(e)}),[a.contract]),Object(i.useEffect)((function(){return a.index&&c.isConnected()&&c.supportChain&&K(!1),function(){}}),[c.detail.account,a.index]),Object(i.useEffect)((function(){return ee||(a.position.volume>0?a.volume<0?O("short"):O("long"):a.position.volume<0&&(a.volume>0?O("short"):O("long"))),function(){}}),[a.volume,ee]),Object(i.useEffect)((function(){if(a.fundingRate.funding0&&h){var e=Object(o.bg)(a.fundingRate.funding0).div(Object(o.bg)(h)).times(Object(o.bg)(100)).toString();ae(e)}}),[a.fundingRate,h]),Object(i.useEffect)((function(){return a.setUserSelectedDirection(m),function(){}}),[m]),Object(x.jsx)("div",{className:"trade-info",children:Object(x.jsxs)("div",{className:"trade-peration",children:[Object(x.jsxs)("div",{className:"check-baseToken",children:[Object(x.jsx)(W,{setSpec:D,spec:a.symbolInfos,type:b}),Object(x.jsxs)("div",{className:"price-fundingRate pc",children:[b.isFuture&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"mark-price",children:[d["mark-price"]," : ",Object(x.jsxs)("span",{className:F,children:["\xa0 ",Object(x.jsx)(p,{value:h,decimalScale:2})]})]}),Object(x.jsxs)("div",{className:"index-prcie",children:[d["index-price"],": ",Object(x.jsxs)("span",{className:Q,children:["\xa0 ",Object(x.jsx)(p,{value:y,decimalScale:2})]})]})]}),b.isOption&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"mark-price",children:[d["mark-price"]," : ",Object(x.jsxs)("span",{className:F,children:["\xa0 ",Object(x.jsx)(p,{value:h,decimalScale:4})]})]}),Object(x.jsxs)("div",{className:"index-prcie",children:[a.symbolInfo?a.symbolInfo.underlier:""," : ",Object(x.jsxs)("span",{className:"option-vol",children:["\xa0 ",Object(x.jsxs)("span",{children:[" ",Object(x.jsx)(p,{value:y,decimalScale:2})]}),Object(x.jsx)("span",{className:"vol",children:" | "}),"DVOL : ",Object(x.jsx)(p,{value:a.position.volatility,decimalScale:2,suffix:"%"})]})]})]}),b.isPower&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"mark-price",children:[d["mark-price"]," : ",Object(x.jsxs)("span",{className:F,children:["\xa0 ",Object(x.jsx)(p,{value:h,decimalScale:4})]})]}),Object(x.jsxs)("div",{className:"index-prcie",children:[a.symbolInfo.symbolWithoutPower," Price : ",Object(x.jsxs)("span",{className:"option-vol",children:["\xa0 ",Object(x.jsxs)("span",{children:[" ",Object(x.jsx)(p,{value:y,decimalScale:2})]}),Object(x.jsx)("span",{className:"vol",children:" | "}),"DVOL : ",Object(x.jsx)(p,{value:a.position.volatility,decimalScale:2,suffix:"%"})]})]})]}),Object(x.jsxs)("div",{className:"funding-rate",children:[(b.isOption||b.isPower)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{children:"Daily Funding : \xa0"}),Object(x.jsx)(B,{block:!1,tip:a.fundingFeeValueTip,children:Object(x.jsx)("span",{className:"funding-per",tip:a.fundingFeeValueTip||"",children:Object(x.jsx)(p,{value:a.fundingRate.funding0,decimalScale:4})})})]}),b.isFuture&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{children:"Daily Funding: \xa0"}),Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{className:"funding-per",tip:a.fundingFeeValueTip||"",children:Object(x.jsx)(p,{value:a.fundingRate.funding0,decimalScale:4})})}),Object(x.jsxs)(B,{block:!1,children:["\xa0  ",Object(x.jsxs)("span",{className:"funding-per",tip:a.rateTip||"",children:["(",Object(x.jsx)(p,{value:ie,decimalScale:4,suffix:"%"}),")"]})]})]})]})]}),Object(x.jsxs)("div",{className:"price-fundingRate mobile",children:[b.isFuture&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"index-prcie",children:[d["mark-price"],": ",Object(x.jsxs)("span",{className:F,children:["\xa0 ",Object(x.jsx)(p,{value:h,decimalScale:2})]})]}),Object(x.jsxs)("div",{className:"index-prcie",children:[d.index,": ",Object(x.jsxs)("span",{className:Q,children:["\xa0 ",Object(x.jsx)(p,{value:y,decimalScale:2})]})]})]}),b.isOption&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"mark-price",children:[d["mark-price"]," : ",Object(x.jsxs)("span",{className:F,children:["\xa0 ",Object(x.jsx)(p,{value:h,decimalScale:2})]})]}),Object(x.jsxs)("div",{className:"index-prcie",children:[a.symbolInfo?a.symbolInfo.underlier:"",": ",Object(x.jsxs)("span",{className:Q,children:["\xa0 ",Object(x.jsx)(p,{value:a.index,decimalScale:2})]})]}),Object(x.jsxs)("div",{className:"index-prcie",children:["DVOL: ",Object(x.jsx)(p,{value:a.volatility,decimalScale:2})]})]}),Object(x.jsxs)("div",{className:"funding-rate",children:[b.isOption&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{children:"Daily Funding : \xa0"}),Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{className:"funding-per",tip:a.fundingFeeValueTip||"",children:Object(x.jsx)(p,{value:a.fundingRate.premiumFunding0,decimalScale:4})})})]}),b.isFuture&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{children:"Daily Funding : \xa0"}),Object(x.jsx)(B,{block:!1,tip:a.fundingFeeValueTip,children:Object(x.jsx)("span",{className:"funding-per",tip:a.fundingFeeValueTip||"",children:Object(x.jsx)(p,{value:a.fundingRate.funding0,decimalScale:4})})})]})]}),b.isFuture&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"rate",children:Object(x.jsx)(B,{block:!1,tip:a.rateTip,children:Object(x.jsxs)("span",{className:"funding-per",tip:a.rateTip||"",children:["(",Object(x.jsx)(p,{value:ie,decimalScale:4,suffix:"%"}),")"]})})})})]})]}),Object(x.jsxs)("div",{className:ve,children:[Object(x.jsx)("div",{className:"check-long",onClick:function(){return ke("long")},children:d["long-buy"]}),Object(x.jsx)("div",{className:"check-short",onClick:function(){return ke("short")},children:d["short-sell"]})]}),Object(x.jsxs)("div",{className:"the-input",children:[Object(x.jsxs)("div",{className:"left",children:[Object(x.jsxs)("div",{className:"current-position",children:[Object(x.jsx)("span",{children:d["current-position"]}),Object(x.jsx)("span",{className:"position-text",children:Object(x.jsx)(p,{value:a.position.volume,allowZero:!0,thousandSeparator:!0})})]}),Object(x.jsx)("div",{className:"contrant option-input",children:Object(x.jsxs)("div",{className:"bg-input",children:[Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"number",step:a.contract.multiplier,onFocus:function(e){e.target.setAttribute("class","contrant-input inputFamliy")},onBlur:function(e){var t=e.target,c=t.value,n=a.contract.minTradeUnit.toString();if(n<=1){var i=n.indexOf("."),s=n.slice(i).length;-1!==t.value.indexOf(".")&&(c="0"===(c=t.value.substring(0,t.value.indexOf(".")+s))?"":c,a.setVolume(c))}else{var l=n.length-1,r=c.slice(-l);c=c.slice(0,-l),c+=r=r.replace(/\d/gi,"0"),a.setVolume(c)}""!==c&&oe(c<n),""===t.value&&t.setAttribute("class","contrant-input")},onKeyPress:function(e){46!==e.which&&(e.which<48||e.which>57)&&e.preventDefault()},disabled:0===Math.abs(a.accountInfo.availableMargin),onChange:function(e){return function(e){var t=e.target.value;a.setVolume(t),te(!0)}(e)},value:a.displayVolume,className:Ne,placeholder:G})}),Object(x.jsx)("div",{className:"option-unit",children:a.symbolInfo&&a.symbolInfo.unit})]})}),re&&Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"min-quantity",children:[d["option-input-min-quantity"],"\xa0 ",a.contract.multiplier," \xa0",a.symbolInfo&&a.symbolInfo.unit]})})]}),Object(x.jsx)("div",{className:"right-info",children:Object(x.jsxs)("div",{className:"contrant-info ".concat(l.current),children:[Object(x.jsxs)("div",{className:"balance-contract",children:[Object(x.jsxs)(B,{block:!1,children:[Object(x.jsx)("span",{className:"balance-contract-text pc",tip:"Total Discounted Margin + Unrealized PnL + Acc'd Funding",children:d["dynamic-effective-balance"]}),Object(x.jsx)("span",{className:"balance-contract-text mobile",tip:"Total Discounted Margin + Unrealized PnL + Acc'd Funding",children:d["dynamic-effective-balance"]})]}),Object(x.jsxs)("span",{className:"balance-contract-num ".concat(l.current),children:[Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{className:"open-add",id:"openAddMargin",tip:d["remove-margin"],onClick:function(){return Oe(!0)},children:Object(x.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABHNCSVQICAgIfAhkiAAAAMtJREFUKFNjZACCR35JUoxM/1L//2cMY2Rk0AKJYQP//zNcY2T8v+r/P6bZcpvmPWMEaWRg/LcKqGkPy3/GVZIb51/Dpfm5f6LWH8b/YUBDXBj+M4UxPg5IqAcqZpTdsKABlyZ0cZgexkf+iVdZGRhC8dmIrhnkgt8MDKuBNif+l90wn5FYW2HqQPoGkWaQc3B5Adl7WJ0NDEkH3JoXHBgkfqYwnilJYYi0vRuYtlcTkbZDgWnbFZy2kXJVGjBXhRKRq1YDc9UsUK4CANLUkGF0vLC1AAAAAElFTkSuQmCC",alt:"add margin"})})}),Object(x.jsx)(p,{value:a.accountInfo.dynEffMargin,allowZero:!0,decimalScale:2}),Object(x.jsx)(B,{block:!1,children:Object(x.jsx)("span",{className:"open-remove",onClick:function(){return Oe(!0)},tip:d["add-margin"],children:Object(x.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABHNCSVQICAgIfAhkiAAAAMNJREFUKFNjZAAC6yOGUsy/2VP///8fxsjIqAUSwwaA8teA8qv+sv6cfdTm/DNGkEamX+yrGBkZ9vxn/r/qsN3Ja7g02x4y12L8yxj2/z+Dyz+2n2GMdvst6oGKGQ85nmjApQldHKaH0Xaf+VUGFoZQfDaiawa5gOEPw2qQzf+BtjJis5WQ3CDSDHIqroBD9h5I3SByNrKTCYY2pfFMfgpDStu7gWl7NRFpOxSYtl3BaRspV6UBc00oEblqNTBXzQLlKgA5rqOIANC/1gAAAABJRU5ErkJggg==",alt:"add margin"})})})]})]}),Object(x.jsxs)(B,{block:!1,children:[Object(x.jsx)("div",{className:"box-margin",children:d.margin}),Object(x.jsxs)("div",{className:"box-margin",children:[Object(x.jsxs)("span",{className:"total-held",tip:d["total-held-title"],children:["\xa0- ",d["total-held"]]}),Object(x.jsx)("span",{className:"margin",children:Object(x.jsx)(p,{value:a.position.marginHeld,allowZero:!0,decimalScale:2})})]}),Object(x.jsxs)("div",{className:"margin-held-pos",children:[Object(x.jsxs)("span",{className:"pos-held",tip:d["for-this-pos-title"],children:["\xa0- ",d["for-this-pos"]," "]}),Object(x.jsx)("span",{className:"margin",children:Object(x.jsx)(p,{value:a.position.marginHeldBySymbol,allowZero:!0,decimalScale:2})})]})]}),Object(x.jsx)(B,{block:!0,children:Object(x.jsxs)("div",{className:"available-balance",children:[Object(x.jsxs)("span",{className:"pc",tip:d["available-balance-title"],children:[" ",d["available-balance"]," "]}),Object(x.jsx)("span",{className:"mobile",tip:d["available-balance-title"],children:d["available-balance"]}),Object(x.jsx)("span",{className:"available-balance-num",children:Object(x.jsx)(p,{value:a.accountInfo.availableMargin,allowZero:!0,decimalScale:2})})]})})]})})]}),Object(x.jsx)("div",{className:"slider mt-13"}),Object(x.jsx)("div",{className:"enterInfo",children:a.displayVolume&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"text-info",children:[Object(x.jsx)("div",{className:"title-enter pool",children:"Margin Usage"}),Object(x.jsx)("div",{className:"text-enter poolL",children:Object(x.jsx)(p,{value:a.impactPreview.marginUsage,decimalScale:2})})]}),Object(x.jsxs)("div",{className:"text-info",children:[Object(x.jsx)("div",{className:"title-enter pool",children:d["trade-price"]}),Object(x.jsx)("div",{className:"text-enter poolL",children:Object(x.jsx)(p,{value:a.impactPreview.tradePrice,decimalScale:2})})]}),Object(x.jsxs)("div",{className:"text-info",children:[Object(x.jsx)("div",{className:"title-enter",children:d["transaction-fee"]}),Object(x.jsx)("div",{className:"text-enter",children:Object(x.jsx)(p,{value:a.impactPreview.fee,allowZero:!0,decimalScale:2,suffix:" ".concat(a.symbolInfo.bTokenSymbol)})})]}),(b.isFuture||b.isPower)&&Object(x.jsxs)("div",{className:"text-info",children:[Object(x.jsx)("div",{className:"title-enter",children:d["liquidation-price"]}),Object(x.jsx)("div",{className:"text-enter",children:Object(x.jsx)(p,{value:a.impactPreview.liqPriceAfter,decimalScale:2})})]})]})}),Object(x.jsx)(X,{wallet:c,spec:a.symbolInfo,indexPrice:y,available:a.accountInfo.availableMargin,volume:a.displayVolume,direction:m,leverage:a.accountInfo.leverage,afterLeverage:a.accountInfo.afterLeverage,afterTrade:function(){a.setVolume(""),a.refresh(),c.refresh()},position:a.position,trading:a,version:l,lang:d,type:b}),Object(x.jsx)(V,{wallet:c,modalIsOpen:me,onClose:function(){return Oe(!1)},spec:a.symbolInfo,afterDepositAndWithdraw:function(){we()},position:a.position,overlay:{background:"#1b1c22",top:80},className:"balance-list-dialog",lang:d})]})})})));t.a=Object(O.b)("wallet","trading","loading","version","type")(Object(O.c)((function(e){var t=e.wallet,c=e.trading,a=e.isPro,s=e.lang,l=e.loading,r=(e.version,e.type),o=(e.actions,Object(i.useState)("trade")),d=Object(n.a)(o,2),b=d[0],u=d[1],A=function(e){return u(e)},m=j()("trade-position",b),O=Object(H.b)();return Object(i.useEffect)((function(){return l.loading(),t.setStatus(O.status),t.setDetail(O),c.init(t,(function(){l.loaded()})),function(){c.clean()}}),[O,r.current]),Object(x.jsxs)("div",{className:m,children:[Object(x.jsx)("div",{className:"header-top",children:Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)("span",{className:"trade",onClick:function(){return A("trade")},children:s.trade}),!a&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{className:"pc position",onClick:function(){return A("position")},children:s["my-position"]}),Object(x.jsx)("span",{className:"mobile position",onClick:function(){return A("position")},children:s["my-position"]}),Object(x.jsx)("span",{className:"history",onClick:function(){return A("history")},children:s.history})]})]})}),Object(x.jsx)(_,{lang:s}),Object(x.jsx)(E,{lang:s}),Object(x.jsx)(J,{wallet:t,spec:c.config,specs:c.configs,lang:s}),Object(x.jsx)(G,{lang:s})]})})))},1479:function(e,t,c){},1481:function(e,t){},1482:function(e,t){},1483:function(e,t){},1484:function(e,t){},1485:function(e,t){},1486:function(e,t){},1487:function(e,t,c){}}]);